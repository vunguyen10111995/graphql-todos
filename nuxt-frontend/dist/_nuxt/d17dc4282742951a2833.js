(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{375:function(t,e,r){"use strict";r.d(e,"e",function(){return f}),r.d(e,"c",function(){return p}),r.d(e,"a",function(){return m}),r.d(e,"d",function(){return h}),r.d(e,"b",function(){return d});var n=r(408),a=r.n(n),i=(r(59),r(409)),s=r.n(i);function o(){var t=a()(["mutation{deleteUser(id:","){id}}"]);return o=function(){return t},t}function u(){var t=a()(["mutation{updateUser(id:",', email:"','", name:"','",password:"','"){id,name,email}}']);return u=function(){return t},t}function l(){var t=a()(['\n    mutation{\n    createUser(name: "','",\n    email: "','",\n    password: "','"){id, name, email}\n}\n']);return l=function(){return t},t}function c(){var t=a()(["\nquery {\n    users(take:10,page:",") {\n    items {\n        id,name,email\n    } cursor {\n        currentPage,total,hasPages,perPage\n        }\n    }\n}\n"]);return c=function(){return t},t}var f=function(t){return"query {\n    user(id:".concat(t,") {\n        id,\n        name,\n        email,\n        profile {\n            address\n            company\n            dob\n        }\n    }\n}")},p=function(t){return s()(c(),t)},m=function(t){return s()(l(),t.name,t.email,t.password)},h=function(t){return s()(u(),t.id,t.email,t.name,t.password)},d=function(t){return s()(o(),t.id)}},385:function(t,e,r){"use strict";var n=r(132),a=r.n(n).a.create({baseURL:"https://laravel-nuxt-graphql.herokuapp.com/graphql"});r.d(e,"a",function(){return i});var i=function(t){return a.get("/graphql?query=".concat(t))}},405:function(t,e,r){var n=r(563);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,r(48).default)("0292f480",n,!0,{sourceMap:!1})},406:function(t,e,r){var n=r(565);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,r(48).default)("5eae100b",n,!0,{sourceMap:!1})},562:function(t,e,r){"use strict";var n=r(405);r.n(n).a},563:function(t,e,r){(t.exports=r(47)(!1)).push([t.i,"\n.text-center{text-align:center\n}",""])},564:function(t,e,r){"use strict";var n=r(406);r.n(n).a},565:function(t,e,r){(t.exports=r(47)(!1)).push([t.i,"\nh2{text-align:center;margin:1em\n}",""])},569:function(t,e,r){"use strict";r.r(e);var n,a=r(435),i=r.n(a),s=(r(58),r(8)),o=r.n(s),u=r(375),l=(r(385),r(386)),c=r.n(l),f=r(458),p=r.n(f),m=r(517),h=r.n(m),d=function(t,e,r){return p()(t,function(t){return t[e]!==r[e]?t:c()({},t,r)})},v=function(t,e){var r=h()(t,function(t){return t.id===e.id});return t.splice(r,1),t},g=r(429),b=r.n(g),y=r(522),w=r.n(y),_=(r(544),r(36),r(131),r(546)),x=r.n(_),k=r(547),P=r.n(k),$=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};x()(this,t),this.errors=e}return P()(t,[{key:"has",value:function(t){return this.errors.hasOwnProperty(t)}},{key:"get",value:function(t){if(this.has(t)){var e=this.errors[t];return Array.isArray(e)?e[0]:e}return null}},{key:"reset",value:function(t){t?delete this.errors[t]:this.errors={}}},{key:"clear",value:function(t){this.reset(t)}},{key:"collect",value:function(t){this.errors=t}},{key:"any",value:function(){return Object.keys(this.errors).length>0}},{key:"all",value:function(){var t=[];return Object.values(this.errors).forEach(function(e){return t=t.concat(e)}),t}}]),t}(),q={props:{validateForm:Boolean,save:{type:Function,required:!0}},data:function(){return{form:{},data:{},errors:new $,show:!1,processing:!1}},methods:{open:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&(this.data=t,this.form=w()(t)),this.show=!0},close:function(){this.validateForm&&this.$refs.form&&this.$refs.form.clearValidate(),this.errors.reset(),this.show=!1},validateBeforeSubmit:function(t){this.$refs.form.validate(function(e){return!!e&&t()})},submit:function(){var t=this;this.validateForm&&this.$refs.form?this.validateBeforeSubmit(function(){return t.handleSubmit()}):this.handleSubmit()},handleSubmit:(n=o()(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.processing=!0,t.next=4,this.save(this.form,this.data);case 4:this.close(),t.next=15;break;case 7:if(t.prev=7,t.t0=t.catch(0),!(e=b()(t.t0,"response.data.errors"))){t.next=14;break}this.errors.collect(e),t.next=15;break;case 14:throw t.t0;case 15:return t.prev=15,this.processing=!1,t.finish(15);case 18:case"end":return t.stop()}},t,this,[[0,7,15,18]])})),function(){return n.apply(this,arguments)})}},S={mixins:[q],props:{title:String,save:{type:Function,required:!0},formLabelWidth:{default:"120px",type:String}},data:function(){return{form:{name:"",email:"",password:""}}}},U=r(31),C=Object(U.a)(S,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{attrs:{visible:t.show,title:t.title},on:{"update:visible":function(e){t.show=e}}},[r("el-form",{attrs:{model:t.form}},[r("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"Name"}},[r("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),r("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"Email"}},[r("el-input",{attrs:{type:"email"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),r("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"New Password"}},[r("el-input",{attrs:{type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1)],1),t._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:t.close}},[t._v("Cancel")]),t._v(" "),r("el-button",{attrs:{loading:t.processing,type:"primary"},on:{click:t.submit}},[t._v("\n                Confirm\n            ")])],1)],1)},[],!1,null,null,null);C.options.__file="Dialog.vue";var O=C.exports,R=r(196),j=r.n(R),D=(r(548),r(551)),E=r.n(D),L={props:{currentPage:{type:Number,default:1},lastPage:{type:Number,default:1},queryParam:{type:String,default:"page"}},methods:{go:function(t){this.$router.push(this.to(t))},to:function(t){var e=this.$route.path,r=E()(this.$route.query,[this.queryParam]);return{path:e,query:1!==t?c()({},r,j()({},this.queryParam,t)):r}}}},F=(r(562),Object(U.a)(L,function(){var t=this.$createElement,e=this._self._c||t;return this.lastPage>1?e("el-pagination",{staticClass:"text-center mt-1",attrs:{"current-page":this.currentPage,"page-count":this.lastPage,background:""},on:{"current-change":this.go}}):this._e()},[],!1,null,null,null));F.options.__file="Pagination.vue";var N,W,I,M={name:"Users",components:{Pagination:F.exports,Dialog:O},asyncData:(I=o()(regeneratorRuntime.mark(function t(e){var r,n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.app,e.route,n=e.query,t.next=3,r.apolloProvider.defaultClient.query({query:Object(u.c)(n.page||1)}).then(function(t){return t.data.users});case 3:return a=t.sent,t.abrupt("return",{users:a.items,cursor:c()({},a.cursor,{totalPage:Math.ceil(a.cursor.total/a.cursor.perPage)})});case 5:case"end":return t.stop()}},t,this)})),function(t){return I.apply(this,arguments)}),data:function(){return{formLabelWidth:"100px"}},methods:{create:function(){this.$refs.create.open()},edit:function(t){this.$refs.edit.open(t)},store:function(t){var e=this;this.$apollo.mutate({mutation:Object(u.a)(t)}).then(function(t){e.users=[t.data.createUser].concat(i()(e.users))})},update:(W=o()(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$apollo.mutate({mutation:Object(u.d)(e)});case 3:this.users=d(this.users,"id",e),t.next=10;break;case 6:throw t.prev=6,t.t0=t.catch(0),this.$message.warning("Please try again later"),t.t0;case 10:case"end":return t.stop()}},t,this,[[0,6]])})),function(t){return W.apply(this,arguments)}),remove:(N=o()(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$apollo.mutate({mutation:Object(u.b)(e)});case 3:this.users=v(this.users,e),t.next=10;break;case 6:throw t.prev=6,t.t0=t.catch(0),this.$message.warning("Please try again later"),t.t0;case 10:case"end":return t.stop()}},t,this,[[0,6]])})),function(t){return N.apply(this,arguments)})},watchQuery:!0},z=(r(564),Object(U.a)(M,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container-fluid"},[r("h2",[t._v("THIS IS LIST USERS")]),t._v(" "),r("el-button",{staticClass:"mb-4",on:{click:t.create}},[t._v("\n            Create User\n        ")]),t._v(" "),r("Dialog",{ref:"create",attrs:{title:"Create User",save:t.store}}),t._v(" "),r("Dialog",{ref:"edit",attrs:{title:"Update User",save:t.update}}),t._v(" "),r("div",{staticClass:"list-user mb-4"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.users,border:""}},[r("el-table-column",{attrs:{prop:"id",label:"ID",width:"50px"}}),t._v(" "),r("el-table-column",{attrs:{prop:"name",label:"Name"}}),t._v(" "),r("el-table-column",{attrs:{prop:"email",label:"Email"}}),t._v(" "),r("el-table-column",{attrs:{prop:"id",label:"Modify"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[r("nuxt-link",{attrs:{to:"/users/"+n.id}},[r("el-button",{attrs:{size:"mini"}},[t._v("\n                            View\n                        ")])],1),t._v(" "),r("el-button",{attrs:{size:"mini"},on:{click:function(e){t.edit(n)}}},[t._v("\n                        Update\n                    ")]),t._v(" "),r("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){t.remove(n)}}},[t._v("\n                        Delete\n                    ")])]}}])})],1)],1),t._v(" "),r("Pagination",{attrs:{"current-page":t.cursor.currentPage,"last-page":t.cursor.totalPage}})],1)},[],!1,null,null,null));z.options.__file="index.vue";e.default=z.exports}}]);